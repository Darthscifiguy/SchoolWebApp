<div class="m-3">
<div class="container-fluid p-3 rounded-3 bg-secondary-subtle">
  <h1>Courses Search</h1>
  <hr class="my-4">
  <p>Please search for courses below</p>
</div>
</div>

<div class="m-3">
<form [formGroup]="courseFormData" (ngSubmit)="onSubmit(courseFormData.value)">
        <div class="row">
          <div class="form-group">
              <label for="courseId">Course ID:</label>
              <input class="w-50 form-control" type="number" id="courseId" name="courseId" formControlName="courseId"/>
              @if((courseId?.dirty || courseId?.touched) &&  courseId?.errors?.['min'])
              {
                <div>
                <p class="text-danger">Number must be greater then 0 to search course id!</p>
                </div>
              }
              @if((courseId?.dirty || courseId?.touched) &&  courseId?.errors?.['max'])
              {
                <div>
                <p class="text-danger">Number must be less then 9999 to search course id!</p>
                </div>
              }
              @if((courseId?.dirty || courseId?.touched) &&  courseId?.errors?.['pattern'])
              {
                <div>
                <p class="text-danger">Can only use whole numbers to search course id!</p>
                </div>
              }
          </div>
      </div>

        <div class="row g-3">
          <div class="col-auto">
            <label for="teacherName">Staff Name:</label>
            <input class="w-75 form-control" type="string" id="teacherName" name="teacherName" formControlName="teacherName"/>
            @if((teacherName?.dirty || teacherName?.touched) &&  teacherName?.errors?.['minlength'])
            {
              <div>
              <p class="text-danger">Must have 3 or more characters to search staff!</p>
              </div>
            }
            @if((teacherName?.dirty || teacherName?.touched) &&  teacherName?.errors?.['pattern'])
            {
              <div>
              <p class="text-danger">Can only use characters, spaces, and commas to search staff!</p>
              </div>
            }
          </div>

        <div class="col-auto">
            <label for="studentCount">Student Count (Equal to or Greater Than):</label>
            <input class="w-75 form-control" type="number" id="studentCount" name="studentCount" formControlName="studentCount"/>
            @if((studentCount?.dirty || studentCount?.touched) &&  studentCount?.errors?.['min'])
              {
                <div>
                <p class="text-danger">Number must be greater then 0 to search student count!</p>
                </div>
              }
              @if((studentCount?.dirty || studentCount?.touched) &&  studentCount?.errors?.['max'])
              {
                <div>
                <p class="text-danger">Number must be less then 99 to search student count!</p>
                </div>
              }
              @if((studentCount?.dirty || studentCount?.touched) &&  studentCount?.errors?.['pattern'])
              {
                <div>
                <p class="text-danger">Can only use whole numbers to search student count!</p>
                </div>
              }
        </div>

        </div>
        <button type="submit" [disabled]="!courseFormData.valid">Search</button>
        <button type="button" class="m-1"(click)="processClear()">Clear</button>
</form>
</div>


<div class="m-3">
<table class="mt-3 table">
  <thead>
    <tr>
      <th scope="col">ID</th>
      <th scope="col">Name</th>
      <th scope="col">Teacher ID</th>
      <th scope="col">Student Count</th>
      <th scope="col">Start Date</th>
      <th scope="col">End Date</th>
      <th scope="col">Notes</th>
      <th scope="col">Staff Name</th>
      <th scope="col">Position</th>
      <th scope="col">Status</th>
    </tr>
  </thead>
  <tbody>
    @for (course of courses; track course){
    <tr>
        <td>{{course.id}}</td>
        <td>{{course.name}}</td>
        <td>{{course.teacherID}}</td>
        <td>{{course.studentCount}}</td>
        <td>{{course.startDate}}</td>
        <td>{{course.endDate}}</td>
        <td>{{course.notes}}</td>
        <td>{{course.staff}}</td>
        <td>{{course.position}}</td>
        <td>{{course.status}}</td>
    </tr>
    }
  </tbody>
</table>
</div>


